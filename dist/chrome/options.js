(()=>{var e={625:function(e,r,s){var t,a,n=s(625);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,void 0===(a="function"==typeof(t=function(e){"use strict";if(void 0===window.browser||Object.getPrototypeOf(window.browser)!==Object.prototype||Object.getPrototypeOf(n)!==Object.prototype){const r="The message port closed before a response was received.",s="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",t=e=>{const t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(e,r){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=(r,s)=>(...t)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):s.singleCallbackArg||t.length<=1&&!1!==s.singleCallbackArg?r.resolve(t[0]):r.resolve(t)},i=e=>1==e?"argument":"arguments",o=(e,r,s)=>new Proxy(r,{apply:(r,t,a)=>s.call(t,e,...a)});let m=Function.call.bind(Object.prototype.hasOwnProperty);const g=(e,r={},s={})=>{let t=Object.create(null),a={has:(r,s)=>s in e||s in t,get(a,l,A){if(l in t)return t[l];if(!(l in e))return;let u=e[l];if("function"==typeof u)if("function"==typeof r[l])u=o(e,e[l],r[l]);else if(m(s,l)){let r=((e,r)=>function(s,...t){if(t.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${i(r.minArgs)} for ${e}(), got ${t.length}`);if(t.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${i(r.maxArgs)} for ${e}(), got ${t.length}`);return new Promise(((a,i)=>{if(r.fallbackToNoCallback)try{s[e](...t,n({resolve:a,reject:i},r))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),s[e](...t),r.fallbackToNoCallback=!1,r.noCallback=!0,a()}else r.noCallback?(s[e](...t),a()):s[e](...t,n({resolve:a,reject:i},r))}))})(l,s[l]);u=o(e,e[l],r)}else u=u.bind(e);else if("object"==typeof u&&null!==u&&(m(r,l)||m(s,l)))u=g(u,r[l],s[l]);else{if(!m(s,"*"))return Object.defineProperty(t,l,{configurable:!0,enumerable:!0,get:()=>e[l],set(r){e[l]=r}}),u;u=g(u,r[l],s["*"])}return t[l]=u,u},set:(r,s,a,n)=>(s in t?t[s]=a:e[s]=a,!0),defineProperty:(e,r,s)=>Reflect.defineProperty(t,r,s),deleteProperty:(e,r)=>Reflect.deleteProperty(t,r)},l=Object.create(e);return new Proxy(l,a)},l=e=>({addListener(r,s,...t){r.addListener(e.get(s),...t)},hasListener:(r,s)=>r.hasListener(e.get(s)),removeListener(r,s){r.removeListener(e.get(s))}}),A=new a((e=>"function"!=typeof e?e:function(r){const s=g(r,{},{getContent:{minArgs:0,maxArgs:0}});e(s)}));let u=!1;const c=new a((e=>"function"!=typeof e?e:function(r,t,a){let n,i,o=!1,m=new Promise((e=>{n=function(r){u||(console.warn(s,(new Error).stack),u=!0),o=!0,e(r)}}));try{i=e(r,t,n)}catch(e){i=Promise.reject(e)}const g=!0!==i&&((l=i)&&"object"==typeof l&&"function"==typeof l.then);var l;if(!0!==i&&!g&&!o)return!1;return(g?i:m).then((e=>{a(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",a({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),d=({reject:s,resolve:t},a)=>{e.runtime.lastError?e.runtime.lastError.message===r?t():s(new Error(e.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?s(new Error(a.message)):t(a)},p=(e,r,s,...t)=>{if(t.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${i(r.minArgs)} for ${e}(), got ${t.length}`);if(t.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${i(r.maxArgs)} for ${e}(), got ${t.length}`);return new Promise(((e,r)=>{const a=d.bind(null,{resolve:e,reject:r});t.push(a),s.sendMessage(...t)}))},h={devtools:{network:{onRequestFinished:l(A)}},runtime:{onMessage:l(c),onMessageExternal:l(c),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},k={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":k},services:{"*":k},websites:{"*":k}},g(e,h,t)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=t(chrome)}else e.exports=n})?t.apply(r,[e]):t)||(e.exports=a)}},r={};function s(t){var a=r[t];if(void 0!==a)return a.exports;var n=r[t]={exports:{}};return e[t].call(n.exports,n,n.exports,s),n.exports}(()=>{"use strict";const e=Object.freeze({INIT:"init",THREADS:"threads",HIDE_THREAD:"hideThread",UNHIDE_THREAD:"unHideThread",SEND_THREADS_TO_ANOTHER_TAB:"sendThreadsToAnotherTab",AM_I_SPAWNED:"amISpawned",FETCH_THREADS_FROM_OTHER_PAGES:"fetchThreadsFromOtherPages",REQUEST_CACHED_THREADS:"requestCachedThreads",ASK_FOR_MESSAGES:"askForMessages",CLEAR_STORE:"clearStore",GET_SYNC_ID:"getSyncId",ADD_TAG:"addTag",ACQUIRE_SYNC_ID:"acquireSyncId",PAIR_DEVICE:"pairDevice",START_SYNC:"startSync",RESET_DB:"resetDb"}),r=(Object.freeze({INIT_COMPLETE:"initComplete",INIT_FAILED:"initFailed",UNKNOWN_MESSAGE:"unknownMessage",FAILED_THREAD:"failedThread",WHITELISTED_THREAD:"whitelistedThread",IMAGE_SCAN_START:"imageScanStart",IMAGE_SCAN_FINISHED:"imageScanFinished",IMAGE_SCAN_OVER:"imageScanOver",YOU_A_SPAWN_BRO:"youASpawnBro",NAH_YOU_LEGIT_BRO:"nahYouLegitBro",THREAD_FROM_OTHER_PAGE:"threadFromOtherPage",UNREAD_MESSAGE:"unreadMessage",NEW_SYNC_ID:"newSyncId",PAIR_RESULT:"pairResult",SYNC_LOG:"syncLog"}),{ANIME_IMAGE_THREADS:"op_posts",HIDDEN_THREADS:"hidden_threads",WHITELISTED_THREADS:"whitelisted_threads",THREAD_CACHE:"thread_cache",MESSAGE_STORE:"message_store",TAGS:"tags"}),t=(Object.freeze({GENERATE_MANIFEST:"generateManifest",IMAGE_PROCESSOR:"imageProcessor",ATTACH_MANIFEST:"attachManifest",TEXT_PROCESSOR:"textProcessor",REPORT_FAILED_THREAD:"reportFailedThread",REPORT_WHITELISTED_THREAD:"reportWhitelistedThread",NEXT_STEP:"nextStep",ADD_TO_ANIME_IMAGE_THREAD_DB:"addThreadToDb",CHECK_IF_THREAD_HAS_BEEN_HIDDEN:"checkIfThreadHasBeenHidden",OPENCV:"openCV",REPORT_IMAGE_SCAN:"reportImageScan",REPORT_IMAGE_SCAN_FINISHED:"reportImageScanFinished",REPORT_IMAGE_SCAN_OVER:"reportImageScanOver",PUSH_TO_FETCH_QUEUE:"pushToFetchQueue",ADD_TO_HIDE_DB:"addToHideDb",ADD_TO_WHITELIST_DB:"addToWhitelistDb",REMOVE_FROM_HIDE_DB:"removeFromHideDb",REMOVE_FROM_WHITELIST_DB:"removeFromWhitelistDb",HIDE_THREAD:"hideThread",WHITELIST_THREAD:"whitelistThread",FETCH_CACHED_THREADS:"fetchCachedThreads",REFRESH_CACHE:"refreshCache",ADD_THREAD_TO_CACHE:"addThreadToCache",SEND_TO_MASTER_TAB:"sendToMasterTab",REQUEST_UNREAD_MESSAGES:"requestUnreadMessages",RETURN_UNREAD_MESSAGES:"returnUnreadMessages",SHOW_UNREAD_MESSAGE:"showUnreadMessage",CREATE_MESSAGE_MODAL:"createMessageModal",MARK_MESSAGE_AS_READ:"markMessageAsRead",CLEAR_STORE:"clearStore",ADD_TAG_TO_DB:"addTagToDb"}),Object.freeze({ADD_TAG:"addTag"}));var a=s(625);const n={shitposts:["anime","Mitä teet?","mitäs teet","mitäs sä teet","mitä puuhaat"," kännil","kompiai","mitä kuuluu","vittuun laudalta","vittuun suomesta"," masuk","masu asu","lämär"," vaimok"," masuasu","oon toi","oon tää","hyvää yötä","kannattaako ottaa","vihaamislanka"," turaan","Uusi Meemi","meemi julkaistaan","suomijunt","juntti","juntit","juntei","suurlukki","suur lukki","suur-lukki"," animu","airfr"," manlet","ruokakulttuuri","Get over it","Natalia","juttelulanka",":)","yöryömij","puupelto","puuplant","syön ","juon ","ne alkaa h","&gt;turaan"," frisbeeg","hox","huomio huomio","viva la"," la j"," outfit","miksi olet","miks olet","kohta ne ","&lt;3","oivariini","margariini","leuka","Kysy mitä tahansa"," ig ","varmaan sullekki","pitbull","ps5","konsol","ruoka-apust","moikka","seurustelurah","grilli","tagi","tägi","räärään","rokot","vauvasuu"," rakas"," rakkaa"," rakkain","electron","lörr","istuvan sun","käpy tikka","ihana",":3","aktiivisuusp","ruokakuppi","huomenta","tähkäpää","tahkapaa","mitäs köyhät","rasistille","chinlet","huutis mint","huuttis mint"," herkku ","muijan laukusta","löyty muijan","löysin tytyn","löysin muijan","spärd","spydär","venytellä","masua","hyvä elämä","kiitos huorat","erehdyt","vanamehe","t mint","iltapala","fryer","pelastakaa sota"],perverts:["haistaa","imisitkö","maasuk","jarpin","jarppi","nuolisitko","nuuhk","Erika","Vikman","insku","lesbo","ytyil","pylly","pimpp"," kakka"," kakki","ripuli"," pissa"," ripul"," peppu","tuoksuu","haisee","pippeli","pimpuk","kyrpä","muna","nuolla","palleja","palli","perse"," poju"," vess"," pönt"," jarpin","krapulap"," kulli","pimpero","pimpin"," pillu","nussi "," nussi","suihin","twerk","kivespuss"," kiveks"," pimb","kamelinv","sperma"," gore"," kivikova"," peniks"," penis"," jynkky","erektio","kulmuni"," peräsin"," runk"," grower"," transnai","kikityty"," pimps"," anaali","kroppa","Transoikeudet","transu","däddi","sissy","blacked","snowbunny","snow bunny"," tersk","turrilanka","väänsin pa","pröö","golden shower","hinkit","mälli","homofo","transfob","transfoob"," cis","homoilu","nänni"," nänne"," kakkose","daddy","mun suuhun","kiihottaa"," anus","anuks","panettaa","lemmenn"],junkies:[" kanapi","pajatso","kannabi"," kukka","paukut","pajaut","pajarit","bentso","pami","ketipinor","xanor","5mg","0mg","5 mg","0 mg","budi","linkut","ryynikänn","ryyneis"," nokitt","subutex"," piri","lyrica","kännis"],parasites:["ne herää","ne nukkuu","ne menee n","ne menee t","bää","vapaaherr","20e","20€","10€","pari kymppii","parikymppii","toimeentulohakemus","toimeentulotuk","toimeentulo tu","rottapro","loppu kuulle","loppukuulle"],pastas:["Veropetoksesta ilmoittaminen","JUUTALAISET ON IHMISKUNNA SYÖPÄ","tulette syö","tulet syö","meatball subia"," suuhengittäm","mersun tehokas","1.3 litranen","AMG","siirrä kännissä summasta Y","&gt;velaton","velaton okt","velaton omakotitalo","iittalan lautasissa","julkaistaan tässä langassa","muutamaa miljoonaa viime","mistä arvasit?","roadman","road man","VITTY SYOMI","vittu suomi","609_uu.html","2000000267292.html","museoauto","Mikä vittu helsinkiläisiä vaivaa?","julkistamistilaisuus","mikä meno"],politics:["peruss","SDP","kokoomu"," kokkar","kepu","vaali"," äänest","-bot"," bot","puolue","mestari","miksi persut","persut vittuun","sut servattu","ja varten","sanna","sannukka","pääministeri","marin","persu","percel","glunks"],sports:["euroviisu"," kendo","jääkiekko","nhl","Christian","Eriksen","fudis","futis","tanskalaisp","tanska"," matsi","kpop","peli jatkuu","huuhk","maajoukkue"],internetCelebs:["leukik","niilo22","niilo","markoboy","roosa","bella","poarch","tinze","ponpula","deata","donmatteo","don matteo","napanyymi","Jordyn Jones","Jordyn","amazing atheist","pewdiepie","billie","eilish","lidl sneik","lidl snake","milan jaff"," milan","piotr","boeli"],custom:()=>[]},i={shitpostsEnabled:!1,pervertsEnabled:!1,junkiesEnabled:!1,parasitesEnabled:!1,pastasEnabled:!1,politicsEnabled:!1,sportsEnabled:!1,internetCelebsEnabled:!1,wordCountEnabled:!1,allCapsEnabled:!1,customEnabled:!1,noImageEnabled:!1,hasNameEnabled:!1,topicPosterEnabled:!1,noCapsEnabled:!1,onlyGreenTextEnabled:!1,emojisEnabled:!1,animeImageEnabled:!1,pollThreadsEnabled:!1,cachingEnabled:!1,keyboardShortcutEnabled:!1,showOnlyHighPriorityMessages:!1,downvoteEnabled:!1,deletedEnabled:!1},o="wordCount",m="wordLength",g="sleepLength",l="downvoteCount",A="syncId",u="deviceId",c=(()=>{const e={};return{publish:function(r,s){Array.isArray(e[r])&&e[r].forEach((e=>{e(s)}))},subscribe:function(r,s){Array.isArray(e[r])||(e[r]=[]),e[r].push(s)}}})();let d=[...Object.keys(n)];function p(e,r){r||e.preventDefault();let s=!0,t={},A=[];Object.keys(n).map((e=>{const r=document.querySelector("#"+e).value;(function(e){if(0==e.length)return!0;if(e.length>0&&-1==e.indexOf(",")&&2==e.match(/"/g).length)return!0;const r=e.match(/\n/g),s=e.match(/^("[^"]*"(,)\s*)+\s+"[^"]*"$/g);return null==r&&null!=s&&1==s.length})(r)||(A.push(e),s=!1),t[e]=[...r.matchAll(/(["])(?:(?=(\\?))\2.)*?\1/g)].map((e=>e[0].replaceAll('"',"").replaceAll("\\\\/g","\\"))).filter((e=>e.length>0))})),Object.keys(i).map((e=>{t[e]=document.querySelector("#"+e).checked}));const u=parseInt(document.querySelector("#wordCount").value),c=parseInt(document.querySelector("#wordLength").value),p=parseInt(document.querySelector("#sleepLength").value),h=parseInt(document.querySelector("#downvoteCount").value),k=document.querySelector("#syncId").value,E=document.querySelector("#deviceId").value;(!Number.isInteger(u)||u<2)&&(s=!1,A.push(o)),(!Number.isInteger(c)||c<2)&&(s=!1,A.push(m)),(!Number.isInteger(p)||p<0)&&(s=!1,A.push(g)),(!Number.isInteger(h)||h<1)&&(s=!1,A.push(l)),t.wordCount=u,t.wordLength=c,t.sleepLength=p,t.downvoteCount=h,t.syncId=k,t.deviceId=E;for(const e of d)-1==A.indexOf(e)&&document.querySelector("#"+e).classList.remove("error");if(s){for(const e of d)document.querySelector("#"+e).classList.remove("error");a.storage.sync.set(t),r||alert("Muutokset tallennettu")}else for(const e of A)document.querySelector("#"+e).classList.add("error")}function h(){document.getElementById("getSyncId").style.display="none"}function k(){a.runtime.sendMessage({type:e.CLEAR_STORE,payload:{store:r.HIDDEN_THREADS}}),alert("Piilotettujen lankojen kanta on tyhjennetty")}function E(){a.runtime.sendMessage({type:e.CLEAR_STORE,payload:{store:r.THREAD_CACHE}}),alert("Lankojen välimuisti on tyhjennetty")}function x(){fetch("http://localhost:8080/api/syncids/new").then((e=>e.json())).then((e=>{document.querySelector("#syncId").value=e.id.syncId,document.querySelector("#deviceId").value=e.id.deviceId,p(null,!0),h()}))}function y(e){return document.querySelector("#"+e).value}function b(){fetch("http://localhost:8080/api/tags/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:{syncId:y(A),deviceId:y(u)}})}).then((e=>e.json())).then((e=>{c.publish(t.ADD_TAG,e)}))}d.push(o),d.push(m),d.push(g),c.subscribe(t.ADD_TAG,(function(r){a.runtime.sendMessage({type:e.ADD_TAG,payload:r})})),window.onload=function(){let e=document.querySelector("#getSyncId");e.onclick=x,e=document.querySelector("#deleteHiddenThreads"),e.onclick=k,e=document.querySelector("#clearCache"),e.onclick=E,e=document.querySelector("#getTag"),e.onclick=b},document.addEventListener("DOMContentLoaded",(function(){function e(e){return e.length>0?'"'+e.join('", "')+'"':""}function r(e,r,s){document.querySelector("#"+r).value=e[r]||s}function s(e){console.log(`Error: ${e}`)}let t;Object.keys(n).map((r=>{t=a.storage.sync.get(r),t.then((s=>{!function(r,s,t){document.querySelector("#"+s).value=Array.isArray(r[s])?e(r[s]):e(t[s]),document.querySelector("#"+s).style.height=document.querySelector("#"+s).scrollHeight+15+"px"}(s,r,n)}),s)})),Object.keys(i).map((e=>{t=a.storage.sync.get(e),t.then((r=>{!function(e,r,s){document.querySelector("#"+r).checked="boolean"==typeof e[r]?e[r]:s[r]}(r,e,i)}),s)})),t=a.storage.sync.get(o),t.then((e=>{r(e,o,6)}),s),t=a.storage.sync.get(m),t.then((e=>{r(e,m,3)}),s),t=a.storage.sync.get(g),t.then((e=>{r(e,g,0)}),s),t=a.storage.sync.get(l),t.then((e=>{r(e,l,999)}),s),t=a.storage.sync.get(u),t.then((e=>{r(e,u,"")}),s),t=a.storage.sync.get(A),t.then((e=>{r(e,A,""),null!=e&&null!=e.syncId&&e.syncId.length>0&&h()}),s)})),document.querySelector("form").addEventListener("submit",p),document.querySelector("#confirmDeleteHiddenThreads").checked=!1,document.querySelector("#deleteHiddenThreads").disabled=!0,document.querySelector("#confirmDeleteHiddenThreads").addEventListener("change",(function(){document.querySelector("#confirmDeleteHiddenThreads").disabled=!0,document.querySelector("#deleteHiddenThreads").disabled=!1})),document.addEventListener("keydown",(function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&83==e.keyCode&&(e.preventDefault(),p(e))}),!1)})()})();